{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joaoe\\\\OneDrive\\\\007 - Global Trainer\\\\Mentor 360\\\\Mentor 360 - Front End\\\\mentor360-front\\\\src\\\\pages\\\\ChatPage.jsx\",\n  _s = $RefreshSig$();\n// ChatPage.js\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"https://mentor360-back.onrender.com\";\nexport default function ChatPage({\n  user_id: userIdProp,\n  user_name: userNameProp,\n  sessao_id: sessaoIdProp\n}) {\n  _s();\n  // Fonte do sessao_id: URL > prop > localStorage\n  const {\n    sessaoId: sessaoIdFromUrl\n  } = useParams();\n  const sessaoId = sessaoIdFromUrl || sessaoIdProp || localStorage.getItem(\"sessao_id\") || \"\";\n\n  // Fonte do usuário: prop > localStorage\n  const user_id = userIdProp || localStorage.getItem(\"user_id\") || \"\";\n  const user_name = userNameProp || localStorage.getItem(\"user_name\") || \"Você\";\n  const [mensagens, setMensagens] = useState([]); // [{origem, texto_mensagem, data_mensagem}]\n  const [input, setInput] = useState(\"\");\n  const [enviando, setEnviando] = useState(false);\n  const [erro, setErro] = useState(\"\");\n  const bottomRef = useRef(null);\n\n  // Scroll automático para o fim\n  useEffect(() => {\n    var _bottomRef$current;\n    (_bottomRef$current = bottomRef.current) === null || _bottomRef$current === void 0 ? void 0 : _bottomRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [mensagens]);\n\n  // Carregar histórico ao abrir\n  useEffect(() => {\n    async function carregarHistorico() {\n      setErro(\"\");\n      if (!sessaoId) {\n        setErro(\"Sessão não encontrada. Volte e inicie uma nova sessão.\");\n        return;\n      }\n      try {\n        const res = await fetch(`${API_BASE_URL}/historico/${sessaoId}`);\n        const data = await res.json();\n        if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.error) || \"Falha ao carregar histórico.\");\n        const arr = Array.isArray(data === null || data === void 0 ? void 0 : data.mensagens) ? data.mensagens : [];\n        setMensagens(arr);\n      } catch (e) {\n        setErro(e.message);\n      }\n    }\n    carregarHistorico();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sessaoId]);\n  async function handleEnviar(e) {\n    var _e$preventDefault;\n    e === null || e === void 0 ? void 0 : (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    setErro(\"\");\n    const texto = input.trim();\n    if (!texto || !user_id || !sessaoId) return;\n\n    // Otimismo: exibe a mensagem do usuário imediatamente\n    const novaMsgUsuario = {\n      origem: \"usuario\",\n      texto_mensagem: texto,\n      data_mensagem: new Date().toISOString(),\n      _tempId: Math.random().toString(36).slice(2)\n    };\n    setMensagens(prev => [...prev, novaMsgUsuario]);\n    setInput(\"\");\n    setEnviando(true);\n    try {\n      // 1) Salvar a mensagem no histórico\n      const resSave = await fetch(`${API_BASE_URL}/mensagem`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          sessao_id: sessaoId,\n          user_id,\n          texto_mensagem: texto,\n          origem: \"usuario\"\n        })\n      });\n      const dataSave = await resSave.json();\n      if (!resSave.ok) throw new Error((dataSave === null || dataSave === void 0 ? void 0 : dataSave.error) || \"Não foi possível salvar a mensagem.\");\n\n      // 2) Pedir resposta da IA (isso já atualiza vínculos/relacionamentos no backend)\n      const resIa = await fetch(`${API_BASE_URL}/ia`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_id,\n          sessao_id: sessaoId,\n          mensagem: texto\n        })\n      });\n      const dataIa = await resIa.json();\n      if (!resIa.ok) throw new Error((dataIa === null || dataIa === void 0 ? void 0 : dataIa.erro) || \"Falha ao obter resposta da IA.\");\n      const respostaBot = ((dataIa === null || dataIa === void 0 ? void 0 : dataIa.resposta) || \"\").trim();\n      if (respostaBot) {\n        setMensagens(prev => [...prev, {\n          origem: \"bot\",\n          texto_mensagem: respostaBot,\n          data_mensagem: new Date().toISOString()\n        }]);\n      }\n    } catch (e) {\n      // Em caso de erro, mostra uma “bolha” de erro do sistema\n      setMensagens(prev => [...prev, {\n        origem: \"sistema\",\n        texto_mensagem: `Erro: ${e.message}`,\n        data_mensagem: new Date().toISOString()\n      }]);\n      setErro(e.message);\n    } finally {\n      setEnviando(false);\n    }\n  }\n\n  // UI simples estilo “bubbles”\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-3xl mx-auto h-[calc(100vh-4rem)] flex flex-col p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"pb-3 border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold\",\n        children: \"Mentor Tr\\xEDade \\u2014 Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-500\",\n        children: [\"Usu\\xE1rio: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: user_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 20\n        }, this), \" \\u2022 Sess\\xE3o: \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: sessaoId || \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 49\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto py-4 space-y-3\",\n      children: [mensagens.map((m, idx) => {\n        const isUser = m.origem === \"usuario\";\n        const isBot = m.origem === \"bot\";\n        const align = isUser ? \"items-end\" : \"items-start\";\n        const bubble = isUser ? \"bg-blue-600 text-white\" : isBot ? \"bg-gray-100 text-gray-900\" : \"bg-yellow-100 text-yellow-900\";\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${align}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-[80%] px-4 py-2 rounded-2xl ${bubble} whitespace-pre-wrap`,\n            children: m.texto_mensagem\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bottomRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleEnviar,\n      className: \"pt-3 border-t flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"flex-1 border rounded px-3 py-2\",\n        placeholder: \"Escreva sua mensagem\\u2026\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        disabled: !sessaoId || !user_id || enviando\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !input.trim() || enviando,\n        className: \"bg-black text-white px-4 py-2 rounded\",\n        children: enviando ? \"Enviando...\" : \"Enviar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), erro && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600 text-sm mt-2\",\n      children: [\"Erro: \", erro]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"8UaRQ1b7+qNd+1EDiqG+xg2b1aQ=\", false, function () {\n  return [useParams];\n});\n_c = ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["useEffect","useRef","useState","useParams","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","ChatPage","user_id","userIdProp","user_name","userNameProp","sessao_id","sessaoIdProp","_s","sessaoId","sessaoIdFromUrl","localStorage","getItem","mensagens","setMensagens","input","setInput","enviando","setEnviando","erro","setErro","bottomRef","_bottomRef$current","current","scrollIntoView","behavior","carregarHistorico","res","fetch","data","json","ok","Error","error","arr","Array","isArray","e","message","handleEnviar","_e$preventDefault","preventDefault","call","texto","trim","novaMsgUsuario","origem","texto_mensagem","data_mensagem","Date","toISOString","_tempId","Math","random","toString","slice","prev","resSave","method","headers","body","JSON","stringify","dataSave","resIa","mensagem","dataIa","respostaBot","resposta","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","m","idx","isUser","isBot","align","bubble","ref","onSubmit","type","placeholder","value","onChange","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/joaoe/OneDrive/007 - Global Trainer/Mentor 360/Mentor 360 - Front End/mentor360-front/src/pages/ChatPage.jsx"],"sourcesContent":["// ChatPage.js\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"https://mentor360-back.onrender.com\";\r\n\r\nexport default function ChatPage({ user_id: userIdProp, user_name: userNameProp, sessao_id: sessaoIdProp }) {\r\n  // Fonte do sessao_id: URL > prop > localStorage\r\n  const { sessaoId: sessaoIdFromUrl } = useParams();\r\n  const sessaoId =\r\n    sessaoIdFromUrl ||\r\n    sessaoIdProp ||\r\n    localStorage.getItem(\"sessao_id\") ||\r\n    \"\";\r\n\r\n  // Fonte do usuário: prop > localStorage\r\n  const user_id = userIdProp || localStorage.getItem(\"user_id\") || \"\";\r\n  const user_name = userNameProp || localStorage.getItem(\"user_name\") || \"Você\";\r\n\r\n  const [mensagens, setMensagens] = useState([]); // [{origem, texto_mensagem, data_mensagem}]\r\n  const [input, setInput] = useState(\"\");\r\n  const [enviando, setEnviando] = useState(false);\r\n  const [erro, setErro] = useState(\"\");\r\n  const bottomRef = useRef(null);\r\n\r\n  // Scroll automático para o fim\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [mensagens]);\r\n\r\n  // Carregar histórico ao abrir\r\n  useEffect(() => {\r\n    async function carregarHistorico() {\r\n      setErro(\"\");\r\n      if (!sessaoId) {\r\n        setErro(\"Sessão não encontrada. Volte e inicie uma nova sessão.\");\r\n        return;\r\n      }\r\n      try {\r\n        const res = await fetch(`${API_BASE_URL}/historico/${sessaoId}`);\r\n        const data = await res.json();\r\n        if (!res.ok) throw new Error(data?.error || \"Falha ao carregar histórico.\");\r\n        const arr = Array.isArray(data?.mensagens) ? data.mensagens : [];\r\n        setMensagens(arr);\r\n      } catch (e) {\r\n        setErro(e.message);\r\n      }\r\n    }\r\n    carregarHistorico();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [sessaoId]);\r\n\r\n  async function handleEnviar(e) {\r\n    e?.preventDefault?.();\r\n    setErro(\"\");\r\n\r\n    const texto = input.trim();\r\n    if (!texto || !user_id || !sessaoId) return;\r\n\r\n    // Otimismo: exibe a mensagem do usuário imediatamente\r\n    const novaMsgUsuario = {\r\n      origem: \"usuario\",\r\n      texto_mensagem: texto,\r\n      data_mensagem: new Date().toISOString(),\r\n      _tempId: Math.random().toString(36).slice(2),\r\n    };\r\n    setMensagens((prev) => [...prev, novaMsgUsuario]);\r\n    setInput(\"\");\r\n    setEnviando(true);\r\n\r\n    try {\r\n      // 1) Salvar a mensagem no histórico\r\n      const resSave = await fetch(`${API_BASE_URL}/mensagem`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          sessao_id: sessaoId,\r\n          user_id,\r\n          texto_mensagem: texto,\r\n          origem: \"usuario\",\r\n        }),\r\n      });\r\n      const dataSave = await resSave.json();\r\n      if (!resSave.ok) throw new Error(dataSave?.error || \"Não foi possível salvar a mensagem.\");\r\n\r\n      // 2) Pedir resposta da IA (isso já atualiza vínculos/relacionamentos no backend)\r\n      const resIa = await fetch(`${API_BASE_URL}/ia`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          user_id,\r\n          sessao_id: sessaoId,\r\n          mensagem: texto,\r\n        }),\r\n      });\r\n      const dataIa = await resIa.json();\r\n      if (!resIa.ok) throw new Error(dataIa?.erro || \"Falha ao obter resposta da IA.\");\r\n\r\n      const respostaBot = (dataIa?.resposta || \"\").trim();\r\n      if (respostaBot) {\r\n        setMensagens((prev) => [\r\n          ...prev,\r\n          {\r\n            origem: \"bot\",\r\n            texto_mensagem: respostaBot,\r\n            data_mensagem: new Date().toISOString(),\r\n          },\r\n        ]);\r\n      }\r\n    } catch (e) {\r\n      // Em caso de erro, mostra uma “bolha” de erro do sistema\r\n      setMensagens((prev) => [\r\n        ...prev,\r\n        {\r\n          origem: \"sistema\",\r\n          texto_mensagem: `Erro: ${e.message}`,\r\n          data_mensagem: new Date().toISOString(),\r\n        },\r\n      ]);\r\n      setErro(e.message);\r\n    } finally {\r\n      setEnviando(false);\r\n    }\r\n  }\r\n\r\n  // UI simples estilo “bubbles”\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto h-[calc(100vh-4rem)] flex flex-col p-4\">\r\n      <header className=\"pb-3 border-b\">\r\n        <h1 className=\"text-xl font-semibold\">Mentor Tríade — Chat</h1>\r\n        <div className=\"text-sm text-gray-500\">\r\n          Usuário: <b>{user_name}</b> • Sessão: <code>{sessaoId || \"-\"}</code>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"flex-1 overflow-y-auto py-4 space-y-3\">\r\n        {mensagens.map((m, idx) => {\r\n          const isUser = m.origem === \"usuario\";\r\n          const isBot = m.origem === \"bot\";\r\n          const align = isUser ? \"items-end\" : \"items-start\";\r\n          const bubble =\r\n            isUser\r\n              ? \"bg-blue-600 text-white\"\r\n              : isBot\r\n              ? \"bg-gray-100 text-gray-900\"\r\n              : \"bg-yellow-100 text-yellow-900\";\r\n\r\n        return (\r\n          <div key={idx} className={`flex ${align}`}>\r\n            <div className={`max-w-[80%] px-4 py-2 rounded-2xl ${bubble} whitespace-pre-wrap`}>\r\n              {m.texto_mensagem}\r\n            </div>\r\n          </div>\r\n        );\r\n        })}\r\n        <div ref={bottomRef} />\r\n      </div>\r\n\r\n      <form onSubmit={handleEnviar} className=\"pt-3 border-t flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"flex-1 border rounded px-3 py-2\"\r\n          placeholder=\"Escreva sua mensagem…\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          disabled={!sessaoId || !user_id || enviando}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!input.trim() || enviando}\r\n          className=\"bg-black text-white px-4 py-2 rounded\"\r\n        >\r\n          {enviando ? \"Enviando...\" : \"Enviar\"}\r\n        </button>\r\n      </form>\r\n\r\n      {erro && <div className=\"text-red-600 text-sm mt-2\">Erro: {erro}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}